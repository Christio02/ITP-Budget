<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BudgetController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ui</a> &gt; <a href="index.source.html" class="el_package">budget.ui</a> &gt; <span class="el_source">BudgetController.java</span></div><h1>BudgetController.java</h1><pre class="source lang-java linenums">package budget.ui;
import budget.core.Calculation;
import budget.core.Category;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.control.*;
import javafx.scene.image.Image;
import javafx.scene.text.Text;
import javafx.scene.image.ImageView;
import budget.utility.FileUtility;

import java.io.IOException;

<span class="fc" id="L17">public class BudgetController {</span>

    // Static field to hold the instance
    private static BudgetController instance;

    // Method to get the instance
    public static BudgetController getInstance() {
<span class="fc" id="L24">        return instance;</span>
    }


    @FXML
    private TableView&lt;Category&gt; table;

    @FXML
    private Button saveBtn;

    @FXML
    private ImageView saveIcon;

    @FXML
    private TextField input;

    @FXML
    private Button inputBtn;

    @FXML
    private TableColumn&lt;Category, String&gt; category;

    @FXML
    private TableColumn&lt;Category, Integer&gt; amountUsed;

    @FXML
    private SplitPane splitPane;

    @FXML
    private ComboBox&lt;String&gt; selector;

    @FXML
    private Text totalSum;

    @FXML
    private Button returnMenuBtn;


<span class="fc" id="L62">    private final ObservableList&lt;Category&gt; categoryList = FXCollections.observableArrayList();</span>
<span class="fc" id="L63">    private Calculation calc = new Calculation();</span>

    @FXML
    public void initialize() {
<span class="fc" id="L67">        instance = this;</span>
<span class="pc bpc" id="L68" title="1 of 2 branches missed.">        if (FileUtility.getLoad())   {</span>
            try {
<span class="nc" id="L70">                FileUtility.readFromFile(this.calc);</span>
<span class="nc" id="L71">                totalSum.setText(Integer.toString(calc.getTotalSum()));</span>
<span class="nc" id="L72">            } catch (IOException e) {</span>
<span class="nc" id="L73">                e.printStackTrace();</span>
<span class="nc" id="L74">            }</span>
        }


<span class="fc" id="L78">        ObservableList&lt;String&gt; categoryOptions = FXCollections.observableArrayList(</span>
                &quot;Food&quot;, &quot;Entertainment&quot;, &quot;Transportation&quot;, &quot;Clothing&quot;, &quot;Other&quot;
        );
<span class="fc" id="L81">        selector.setItems(categoryOptions);</span>

<span class="fc" id="L83">        category.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;categoryName&quot;));</span>
<span class="fc" id="L84">        amountUsed.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;amount&quot;));</span>

<span class="fc" id="L86">        categoryList.addAll(calc.getCategoriesList()); // add all categories to the list</span>
<span class="fc" id="L87">        table.setItems(categoryList); // set the table to display the list</span>


        // Set the divider position to 40% of the screen and make it non-resizable
<span class="fc" id="L91">        splitPane.getDividers().get(0).positionProperty().addListener((observable, oldValue, newValue) -&gt; {</span>
<span class="fc" id="L92">            splitPane.setDividerPosition(0, 0.4);</span>
<span class="fc" id="L93">        });</span>


        // Set the save button to change image when hovered over
<span class="fc" id="L97">        saveBtn.setOnMouseEntered(event -&gt; {</span>
<span class="nc" id="L98">            Image hoverImage = new Image(getClass().getResource(&quot;/budget/images/saveIconHover.png&quot;).toString());</span>
<span class="nc" id="L99">            saveIcon.setImage(hoverImage);</span>
<span class="nc" id="L100">        });</span>

<span class="fc" id="L102">        saveBtn.setOnMouseExited(event -&gt; {</span>
<span class="nc" id="L103">            Image normalImage = new Image(getClass().getResource(&quot;/budget/images/saveIcon.png&quot;).toString());</span>
<span class="nc" id="L104">            saveIcon.setImage(normalImage);</span>
<span class="nc" id="L105">        });</span>
<span class="fc" id="L106">    }</span>

    @FXML
    private void loadMainMenu(ActionEvent event) throws Exception {
<span class="nc" id="L110">        ChangeScene.changeToScene(getClass(), event, &quot;startmenu-fxml.fxml&quot;);</span>
<span class="nc" id="L111">    }</span>


    @FXML
    public void addAmount() {
        // Get the input values
<span class="fc" id="L117">        int amountToAdd = Integer.parseInt(input.getText());</span>
<span class="fc" id="L118">        String category = selector.getValue();</span>


<span class="fc bfc" id="L121" title="All 2 branches covered.">        for (Category cat : categoryList) {</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">            if (cat.getCategoryName().equals(category)) {</span>
<span class="fc" id="L123">                calc.addAmountToCategory(cat, amountToAdd);</span>
<span class="fc" id="L124">                table.refresh();</span>
<span class="fc" id="L125">                input.clear();</span>
            }
<span class="fc" id="L127">        }</span>

<span class="fc" id="L129">        totalSum.setText(Integer.toString(calc.getTotalSum()));</span>

<span class="fc" id="L131">    }</span>

    @FXML
    public void saveBudget() {
        try {
<span class="nc" id="L136">            FileUtility.writeToFile(calc);</span>
<span class="nc" id="L137">        } catch (Exception e) {</span>
<span class="nc" id="L138">            e.printStackTrace();</span>
<span class="nc" id="L139">        }</span>
<span class="nc" id="L140">    }</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>